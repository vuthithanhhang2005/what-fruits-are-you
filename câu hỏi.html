<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Love Quiz - 12 cÃ¢u</title>
  <style>
    * { box-sizing: border-box; margin:0; padding:0; font-family: "Segoe UI", Roboto, Arial, sans-serif; }
    html,body { width:100%; height:100%; overflow:hidden; }

    .quiz-container {
      position: relative;
      width: 100%;
      height: 100vh;
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-image 0.8s ease;
    }

    .progress-bar {
      position: absolute;
      top: 22px;
      left: 0;
      width: 100%;
      height: 6px;
      background: rgba(255,255,255,0.35);
      border-radius: 6px;
      overflow: hidden;
    }
    .progress { height:100%; background:#1f8b57; width:0%; transition: width 400ms ease; }

    .question-box {
      position: relative;
      z-index: 2;
      width: min(880px, 86%);
      padding: 28px;
      border-radius: 18px;
      background: rgba(11, 88, 49, 0.72);
      color: white;
      text-align: center;
      backdrop-filter: blur(6px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.18);
      transition: opacity 300ms ease, transform 300ms ease;
    }
    .question { font-size: 22px; font-weight:700; line-height:1.25; margin-bottom:18px; }

    .answers { display:flex; flex-direction:column; gap:12px; margin-top:6px; }
    .answers button {
      background: rgba(255,255,255,0.95);
      color: #222;
      border: none;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: transform 160ms ease, background 160ms;
      text-align: left;
    }
    .answers button:hover { transform: translateY(-3px); background: #e7f6eb; }
    .answers button:active { transform: translateY(0); }

    .loading-overlay {
      position: absolute;
      inset: 0;
      z-index: 30;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(to bottom, #c5f2c5, #fff);
      opacity:0;
      transition: opacity 300ms ease;
      pointer-events: none;
      height: 100%;
    }
    .loading-overlay.show { opacity:1; pointer-events:auto; }

    .seed {
      width: 50px;
      height: auto;
      animation: spinGrow 3s ease-in-out forwards;
    }

    @keyframes spinGrow {
      0% { transform: scale(0.8) rotate(0deg); opacity: 0; }
      30% { opacity: 1; }
      100% { transform: scale(1.1) rotate(360deg); opacity: 1; }
    }

    #endScreen {
      position: fixed;
      inset: 0;
      background:linear-gradient(to bottom, #e8f8e8, #fff);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 999;
      transition: opacity .6s ease;
      opacity: 0;
      pointer-events: none;
    }
    #endScreen.show {
      opacity: 1;
      pointer-events: auto;
    }
    #endScreen h2 {
      font-size: 1.8rem;
      color: #03784f;
      margin-bottom: 20px;
      font-weight: 700;
    }
    #seeResultBtn {
      background: #03784f;
      color: #fff;
      border: none;
      padding: 14px 24px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform .2s ease, background .2s ease;
    }
    #seeResultBtn:hover {
      background: #03784f;
      transform: scale(1.05);
    }

    @media (max-width:600px) {
      .question { font-size:18px; }
      .answers button { font-size:15px; padding:10px 12px; }
    }

    /* ðŸ”Š NÃºt nháº¡c */
    #music-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 9999;
      background-color: #03784f;
      color: white;
      border: none;
      border-radius: 50%;
      padding: 10px 14px;
      font-size: 20px;
      cursor: pointer;
      display: block;
    }
  </style>
</head>
<body>

  <div class="quiz-container" id="quiz">
    <div class="progress-bar"><div class="progress" id="progress"></div></div>

    <div class="question-box" id="questionBox">
      <div class="question" id="questionText"></div>
      <div class="answers" id="answerButtons"></div>
    </div>

    <div class="loading-overlay" id="loadingOverlay" aria-hidden="true">
      <img src="náº£y máº§m.png" alt="Chuyá»ƒn cáº£nh" class="seed" id="seedImg">
    </div>
  </div>

  <div id="endScreen">
    <img src="wfru.png" alt="nhÃ¢n váº­t" class="icon" style ="width: 90px; height: auto;">
    <h2>Báº¡n lÃ  ai trong tÃ¬nh duyÃªn?</h2>
    <button id="seeResultBtn">Báº¥m Ä‘á»ƒ nháº­n káº¿t quáº£</button>
  </div>

  <!-- ðŸ”Š Nháº¡c ná»n -->
  <button id="music-toggle">ðŸ”Š</button>
  <audio id="bgMusic" src="piano.mp3" loop preload="auto"></audio>
  <audio id="clickSound" src="click.mp3" preload="auto"></audio>

  <script>
    const questions = [
      { q: "Khi báº¡n báº¯t Ä‘áº§u thÃ­ch má»™t ngÆ°á»i, báº¡n sáº½:", a: ["LÃ¹i láº¡i má»™t bÆ°á»›c Ä‘á»ƒ tháº¥y ngÆ°á»i áº¥y rÃµ hÆ¡n","Äá»£i chá» vÃ  manifest tÃ­n hiá»‡u cá»§a Ä‘á»‘i phÆ°Æ¡ng","Ngay láº­p tá»©c chá»§ Ä‘á»™ng lÃ m quen","Up story, up note thu hÃºt sá»± chÃº Ã½ cá»§a Ä‘á»‘i phÆ°Æ¡ng"], bg:"images/background1.png" },
      { q: "Báº¡n nghÄ© vá» tÃ¬nh yÃªu nhÆ° tháº¿ nÃ o?", a:["TÃ¬nh yÃªu lÃ  cáº§n thá»i gian vun Ä‘áº¯p, mÆ°a dáº§m tháº¥m lÃ¢u","TÃ¬nh yÃªu lÃ  sá»± lá»±a chá»n, khÃ´ng pháº£i Ä‘iá»u báº¯t buá»™c","KhÃ´ng cÃ³ quan niá»‡m cá»¥ thá»ƒ vá» tÃ¬nh yÃªu","TÃ¬nh yÃªu lÃ  Ä‘á»‹nh má»‡nh ta sinh ra dÃ nh cho nhau"], bg:"images/background1.png" },
      { q: "Äiá»u gÃ¬ á»Ÿ crush khiáº¿n báº¡n bá»‹ thu hÃºt nháº¥t?", a:["CÃ¡ch nÃ³i chuyá»‡n vÃ  mindset","Ãnh máº¯t vÃ  cá»­ chá»‰","Ná»¥ cÆ°á»i vÃ  sá»± ngá»t ngÃ o","Sá»± tá»± tin vÃ  nÄƒng lÆ°á»£ng"], bg:"images/background1.png" },
      { q: "Khi ngÆ°á»i yÃªu báº¡n stress, báº¡n sáº½ lÃ m gÃ¬ Ä‘á»ƒ giÃºp Ä‘á»¡ báº¡n áº¥y?", a:["PhÃ¢n tÃ­ch vÃ  cá»‘ gáº¯ng Ä‘Æ°a ra lá»i khuyÃªn há»¯u Ã­ch giÃºp ngÆ°á»i yÃªu","DÃ nh cho há» khÃ´ng gian riÃªng Ä‘á»ƒ bÃ¬nh tÄ©nh vÃ  giáº£i quyáº¿t váº¥n Ä‘á» cá»§a há»","Pha trÃ² vui, táº¡o tiáº¿ng cÆ°á»ng nháº±m kÃ©o mood ngÆ°á»i yÃªu lÃªn","Ã”m há» vÃ o lÃ²ng, an á»§i báº±ng nhá»¯ng lá»i Ä‘á»™ng viÃªn tÃ¢m tÃ¬nh"], bg:"images/background2.png" },
      { q: "Báº¡n thÃ­ch thá»ƒ hiá»‡n tÃ¬nh cáº£m qua ngÃ´n ngá»¯ tÃ¬nh yÃªu nÃ o?", a:["DÃ nh cho Ä‘á»‘i phÆ°Æ¡ng nhiá»u thá»i gian bÃªn nhau","LÃªn káº¿ hoáº¡ch cho nhá»¯ng buá»•i háº¹n hÃ² lÃ£ng máº¡n vÃ  táº·ng quÃ  báº¥t ngá» cho Ä‘á»‘i phÆ°Æ¡ng","HÃ nh Ä‘á»™ng quan tÃ¢m, chÄƒm sÃ³c Ä‘á»‘i phÆ°Æ¡ng tá»‰ má»‰, chÃ¢n tÃ¬nh","Nháº¯n gá»­i nhá»¯ng lá»i ngá»t ngÃ o, dá»… thÆ°Æ¡ng"], bg:"images/background2.png" },
      { q: "Äiá»u khiáº¿n báº¡n yÃªn tÃ¢m nháº¥t trong tÃ¬nh yÃªu?", a:["Má»™t má»‘i quan há»‡ á»• Ä‘á»‹nh, cÃ³ Ä‘á»‹nh hÆ°á»›ng rÃµ rÃ ng cho tÆ°Æ¡ng lai","CÃ¹ng nhau khÃ¡m phÃ¡, tráº£i nghiá»‡m nhá»¯ng Ä‘iá»u má»›i máº» vÃ  khÃ¡c biá»‡t","Cáº£m giÃ¡c Ä‘Æ°á»£c tháº¥u hiá»ƒu vÃ  láº¯ng nghe tháº­t sá»± tá»« Ä‘á»‘i phÆ°Æ¡ng.","LuÃ´n Ä‘Æ°á»£c quan tÃ¢m, há»i han vÃ  cáº£m nháº­n sá»± yÃªu thÆ°Æ¡ng má»—i ngÃ y."], bg:"images/background2.png" },
      { q: "Báº¡n cáº£m nháº­n vai trÃ² cá»§a báº¡n thÆ°á»ng lÃ :", a:["NgÆ°á»i cÃ¢n báº±ng, vá»«a cÆ°Æ¡ng vá»«a nhu, giá»¯ sá»± hÃ i hÃ²a cho má»‘i tÃ¬nh"," NgÆ°á»i luÃ´n láº¯ng nghe, tháº¥u hiá»ƒu Ä‘á»‘i phÆ°Æ¡ng","NgÆ°á»i luÃ´n tÃ¬m kiáº¿m cÃ¡c hoáº¡t Ä‘á»™ng bonding má»›i, táº¡o thÃªm ká»‰ niá»‡m Ä‘Ã¡ng nhá»› giá»¯a 2 ngÆ°á»i","NgÆ°á»i truyá»n nÄƒng lÆ°á»£ng tÃ­ch cá»±c, vui váº» cho Ä‘á»‘i phÆ°Æ¡ng"], bg:"images/background3.png" },
      { q: "Khi má»‘i quan há»‡ cÃ³ mÃ¢u thuáº«n, tranh cÃ£i, báº¡n sáº½ lÃ  gÃ¬?", a:["PhÃ¢n tÃ­ch cho Ä‘á»‘i phÆ°Æ¡ng váº¥n Ä‘á» dÆ°á»›i gÃ³c nhÃ¬n cá»§a báº¡n má»™t cÃ¡ch logic","Giá»¯ im láº·ng, Ä‘á»£i chá» Ä‘á»‘i phÆ°Æ¡ng má»Ÿ lá»i trÆ°á»›c","NÃ³i tháº³ng háº¿t suy nghÄ©, cáº£m xÃºc ngay láº­p tá»©c","ÄÃ¹a giá»¡n cho khÃ´ng khÃ­ háº¡ nhiá»‡t, hai ngÆ°á»i bÃ¬nh tÄ©nh hÆ¡n rá»“i nÃ³i chuyá»‡n"], bg:"images/background3.png" },
      { q: "Báº¡n ngÆ°á»¡ng má»™ chuyá»‡n tÃ¬nh nhÆ° tháº¿ nÃ o nháº¥t?", a:["Má»‘i tÃ¬nh bá»n lÃ¢u 10 nÄƒm, 20 nÄƒm... Ä‘áº¿n Ä‘áº§u báº¡c rÄƒng long","Chuyá»‡n tÃ¬nh sÃ¢u láº¯ng, say Ä‘áº¯m, nhiá»u cáº£m xÃºc","Chuyá»‡n tÃ¬nh ná»“ng nhiá»‡t, chÃ¡y bá»ng nhÆ° cáº£ tháº¿ giá»›i chá»‰ cÃ³ Ä‘Ã´i mÃ¬nh","Má»‘i tÃ¬nh mÃ  cáº£ hai ngÆ°á»i cÃ¹ng nhau trÆ°á»Ÿng thÃ nh, cÃ¹ng khÃ¡m phÃ¡ tháº¿ giá»›i"], bg:"images/background3.png" },
      { q: "Äiá»u quan trá»ng nháº¥t vá»›i báº¡n Ä‘á»ƒ xÃ¢y dá»±ng má»‘i tÃ¬nh lÃ ", a:["Sá»± Ä‘á»“ng hÃ nh","Niá»m vui vÃ  sá»± má»›i máº»","Chia sáº» má»i Ä‘iá»u"," Sá»± tin tÆ°á»Ÿng"], bg:"images/background4.png" },
      { q: "Khi tÃ¬nh yÃªu Ä‘Ã£ bá»n vá»¯ng, báº¡n thÆ°á»ng:", a:["KhÃ´ng lÃ m gÃ¬ xa láº¡, giá»¯ má»‘i quan há»‡ á»•n Ä‘á»‹nh, Ãªm Ä‘á»m nhÆ° mÃ¡i áº¥m an toÃ n","Chia sáº», deeptalk Ä‘á»ƒ káº¿t ná»‘i tÃ¢m há»“n ngÃ y cÃ ng bá»n cháº·t","Duy trÃ¬ ngá»t ngÃ o, lÃ£ng máº¡n nhÆ° thuá»Ÿ má»›i quen","TÃ¬m vÃ  táº¡o báº¥t ngá», niá»m vui, lÃ m má»›i tÃ¬nh yÃªu má»—i ngÃ y"], bg:"images/background4.png" },
      { q: "Náº¿u báº¡n nháº­n tháº¥y giá»¯a 2 ngÆ°á»i cÃ³ khoáº£ng cÃ¡ch, báº¡n sáº½:", a:["Tháº³ng tháº¯n nÃ³i chuyá»‡n, tÃ¬m hiá»ƒu nguyÃªn nhÃ¢n Ä‘á»ƒ giáº£i quyáº¿t","Tá»± thay Ä‘á»•i báº£n thÃ¢n Ä‘á»ƒ phÃ¹ há»£p vá»›i ngÆ°á»i áº¥y","DÃ nh thá»i gian quan tÃ¢m, chÄƒm sÃ³c ngÆ°á»i yÃªu nhiá»u hÆ¡n","Gá»£i chuyá»‡n vui, chuyá»‡n má»›i Ä‘á»ƒ thu háº¹p sá»± xa cÃ¡ch"], bg:"images/background4.png" }
    ];



    const quiz = document.getElementById('quiz');
    const questionBox = document.getElementById('questionBox');
    const questionText = document.getElementById('questionText');
    const answerButtons = document.getElementById('answerButtons');
    const progressBar = document.getElementById('progress');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const seedImg = document.getElementById('seedImg');
    const endScreen = document.getElementById('endScreen');
    const seeResultBtn = document.getElementById('seeResultBtn');
    const clickSound = document.getElementById('clickSound');
    const bgMusic = document.getElementById('bgMusic');
    const toggleBtn = document.getElementById('music-toggle');

    let index = 0;
    const TOTAL = questions.length;
    const answers = [];
    const TRANSITION_IMAGES = { 0:"náº£y máº§m.png", 3:"máº·t trá»i.png", 6:"hoa.png", 9:"fruit.png" };

    function preloadImage(url) { const img = new Image(); img.src = url; }

    function playClick() {
      clickSound.currentTime = 0;
      clickSound.play().catch(()=>{});
    }

    function showQuestion(i) {
      const item = questions[i];
      quiz.style.backgroundImage = `url('${item.bg}')`;
      questionText.textContent = item.q;
      answerButtons.innerHTML = '';
      item.a.forEach((txt, idx) => {
        const b = document.createElement('button');
        b.textContent = txt;
        b.onclick = () => {
          playClick();
          answers.push(idx);
          Array.from(answerButtons.children).forEach(el => el.disabled = true);
          next();
        };
        answerButtons.appendChild(b);
      });
      progressBar.style.width = `${((i + 1) / TOTAL) * 100}%`;
      if (questions[i + 1]) preloadImage(questions[i + 1].bg);
    }

    function showSprout(callback, imgSrc, nextBg = null) {
      if (nextBg) quiz.style.backgroundImage = `url('${nextBg}')`;
      seedImg.src = imgSrc;
      seedImg.style.animation = "none";
      void seedImg.offsetWidth;
      seedImg.style.animation = "spinGrow 3s ease-in-out forwards";
      loadingOverlay.classList.add('show');
      setTimeout(() => {
        loadingOverlay.classList.remove('show');
        callback();
      }, 3500);
    }

    function next() {
      index++;
      if (index >= TOTAL) return showEnd();
      const nextBg = questions[index].bg;
      if (TRANSITION_IMAGES[index]) showSprout(() => showQuestion(index), TRANSITION_IMAGES[index], nextBg);
      else showQuestion(index);
    }

    function getResultFromAnswers() {
      const total = answers.reduce((a,b)=>a+b,0);
      const mod = total % 8;
      const fruits = ["mangosteen","rambutan","pomegranate","lemon","blueberry","pineapple","strawberry","kiwi"];
      return fruits[mod];
    }

    function showEnd() {
      quiz.style.backgroundImage = `url('images/20.jpg')`;
      questionBox.style.display = "none";
      progressBar.style.width = '100%';
      setTimeout(() => { endScreen.classList.add('show'); }, 600);
    }

    seeResultBtn.onclick = () => {
      playClick();
      const resultType = getResultFromAnswers();
      window.location.href = `káº¿t quáº£.html?type=${resultType}`;
    };

    preloadImage(questions[0].bg);
    showSprout(() => showQuestion(index), "náº£y máº§m.png", questions[0].bg);

    /* === ðŸŽµ Nháº¡c ná»n === */
    bgMusic.volume = 0.4;
    let started = false;

    function startMusic() {
      if (!started) {
        started = true;
        bgMusic.play().catch(()=>{});
      }
    }
    document.addEventListener("click", startMusic, { once: true });
    document.addEventListener("touchstart", startMusic, { once: true });

    toggleBtn.addEventListener("click", () => {
      playClick();
      if (bgMusic.paused) {
        bgMusic.play();
        toggleBtn.textContent = "ðŸ”Š";
      } else {
        bgMusic.pause();
        toggleBtn.textContent = "ðŸ”‡";
      }
    });
  </script>
</body>
</html>
